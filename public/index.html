<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    
    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <link rel="stylesheet" type="text/css" href="css/base.css" />
    <link rel="stylesheet" type="text/css"
        href="jquery-ui-1.8.14.custom/css/custom-theme/jquery-ui-1.8.14.custom.css" />

    <script type="text/javascript" src="js/json2.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery.store.js"></script>
    <script type="text/javascript"
        src="jquery-ui-1.8.14.custom/js/jquery-ui-1.8.14.custom.min.js"></script>
    
    <script type="text/javascript" src="js/messagebox.js"></script>
    <script type="text/javascript" src="js/misc.js"></script>
    <script type="text/javascript" src="js/routes.js"></script>
    <script type="text/javascript" src="js/routeDisplay.js"></script>
    
	<title>Calculette Carbone Voyage</title>
</head>
<body>

    <script type="text/javascript">
    /**
     * @author Matthieu Napoli
     * 
     * This file is part of the program "Calculette Carbone Voyage"
     * 
     *  This program is free software: you can redistribute it and/or modify
     *  it under the terms of the Lesser GNU General Public License as published by
     *  the Free Software Foundation, either version 3 of the License, or
     *  any later version.
     *
     *  This program is distributed in the hope that it will be useful,
     *  but WITHOUT ANY WARRANTY; without even the implied warranty of
     *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
     *  Lesser GNU General Public License for more details.
     *
     *  You should have received a copy of the Lesser GNU General Public License
     *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
     */
    </script>

    <div id="messagebox"></div>

	<div id="map">Javascript doit être activé</div>

    <div id="base">
    <div id="baseRelative">
        <div id="header">
            <h1>Calculette Carbone Voyage</h1>
    
            <h2>Ajouter un trajet</h2>
            <p>
                Départ : <input id="addStart" type="text" />
                Arrivée : <input id="addEnd" type="text" />
                <select id="addType">
                    <option value="car">Voiture</option>
                    <option value="plane">Avion</option>
                    <option value="train">Train</option>
                    <option value="coach">Autocar</option>
                    <option value="bus">Bus</option>
                    <option value="bike">Vélo</option>
                    <option value="walking">Marche à pied</option>
                </select> <input id="add" type="button" value="Ajouter" />
            </p>
        </div>
            
        <div id="content">
            <h2>
                Trajets
                <button id="routesClear" class="routesButtons">Vider</button>
                <button id="routesLink" class="routesButtons">Lien</button>
            </h2>
            <ul id="routeList">
                <li>Aucun</li>
            </ul>
        </div>
    
        <div id="total">
            <h2>Émission totale</h2>
            <p id="totalEmission">0 kg équivalent CO&#8322;</p>
        </div>
    </div>
    </div>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	
	<script type="text/javascript">
	    
		var directionsService = new google.maps.DirectionsService();
		var directionsDisplays = [];
		var map;
	    var geocoder;
		
		// Initialization
		$(document).ready(function() {
		    // Storage of the routes
            $.storage = new $.store();
            if ($.storage.driver.scope != "browser") {
                messageBox("Votre navigateur ne supporte pas l'enregistrement des données."
                    +" Votre voyage sera donc perdu une fois que vous quitterez le site.");
            }
            // Jquery UI display
            $("input:button").button();
            // Get routes as link
            $("#routesLink").button({
                icons: { primary: "ui-icon-link" }
            });
            $("#routesLink").click(showLink);
            // Add route
            $("#add").click(addRoute);
            // Delete all routes
            $("#routesClear").button({
                icons: { primary: "ui-icon-trash" }
            });
            $("#routesClear").click(deleteAllRoutes);
			// Create the map
			var myLatlng = new google.maps.LatLng(46.225453, 2.416992);
			var myOptions = {
				mapTypeId: google.maps.MapTypeId.TERRAIN
			};
			map = new google.maps.Map(document.getElementById("map"), myOptions);
			// Geocoding service
            geocoder = new google.maps.Geocoder();
			// Load routes
			loadRoutes();
		});
		
	</script>
	
</body>

</html>